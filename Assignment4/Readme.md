# Fourth Assignment

This project is the my solution for the [Fourth Assignment](http://ichatz.me/Site/InternetOfThings2020-Assignment4) of the IoT course in Sapienza University. It consist to create an HTML5 application using the Generic Sensor API that collects data form the accelerator sensor of the mobile phone.

## Generic Sensor API

The [Generic Sensor API](https://developers.google.com/web/updates/2017/09/sensors-for-the-web#what-is-generic-sensor-api) is a set of interfaces which expose sensor devices to the web platform. The API consists of the base Sensor interface and a set of concrete sensor classes built on top. Having a base interface simplifies the implementation and specification process for the concrete sensor classes.

## User Activity Recognition

>Using the data collected at the cloud, you need to develop a simple activity recognition model that detects if the user is standing still, or walking/running/being on a vehicle.

The model used is based on the length of the vector ![equation](https://latex.codecogs.com/gif.latex?r%28x%2Cy%2Cz%29) generated by the sensor **LinearAcellerationSensor** a subclass of Accelerometer, that measures acceleration applied to the device excluding the acceleration contributed by gravity. It uses x, y, and z properties.

Length of the vector:    ![equation](https://latex.codecogs.com/gif.latex?%5Cleft%20%5C%7C%20r%20%5Cright%20%5C%7C%20%3D%20%5Csqrt%7Bx%5E2&plus;y%5E2&plus;z%5E2%7D)

If the vector is less then a threshold (i.e. 0.5) the user is **sitting or standing** instead if the vector length is more then a threshold the user is **walking** 


## Privacy, permissions and compatibility

The Generic Sensor API is integrated with the Permissions API. However, the spec states that access can be granted without prompting the user, and it depends on the browser and the sensor in question.

While access to accelerometer and gyro sensors might not seem as important to require permission for, as, say a Geolocation sensor, there can be unforeseen and undesirable uses of seemingly innocuous sensors.

iOS does not seem to be compatible with the Generic sensor API but uses another interface to manage the sensors [Motion and Orientation Sensors](https://www.w3.org/TR/motion-sensors/#biblio-generic-sensor) that extends the Generic Sensor API to expose a class of low-level and fusion sensors.

To make up for this lack I added the request for permissions to Felix Krause's code on [User Activity Recognition](https://github.com/KrauseFx/user.activity). He is a developer at Google and he demonstrated a proof of concept of how a userâ€™s activity can be determined based on the data coming from acceleration and gyro sensors, using the Motion and Orientation Sensors APIs.

## WebApp
### Generic Sensor API
>https://lelito-iaia.github.io/IoT-Assignments/Assignment4/

### Motion and Orientation Sensors (iOS - Felix Krause)
>https://lelito-iaia.github.io/IoT-Assignments/Assignment4/user.acrivity.motionAndOrientation/

## Dashboard
Link to the public dashboard
> https://demo.thingsboard.io/dashboard/f8545be0-9464-11ea-bec0-8bb99e4f8c3a?publicId=8ff07230-6a27-11ea-ad02-b3576b7d39f1

## Hands-on Tutorial
Link to Blog Post in Linkedin: 
>https://www.linkedin.com/pulse/crowd-sensing-webapp-emanuele-santo-iaia/
## Video Demonstration
Link to video demonstration on Youtube:
> https://youtu.be/UJdQXGra_4Y
